---
title: از یادداشت به سایت با کوارتز
draft: false
tags:
  - ناقص
  - آموزش
---
# کوارتز چیه؟

![[Pasted image 20240511155335.png]]

کوارتز یک Static Site Generator رایگان است. سایتی که الان جلوی روی شماست، با کوارتز ساخته شده. به زبان ساده، **کوارتز یادداشت‌های ابسیدین را به صورت ورودی می‌گیرد و به عنوان خروجی، یک سایت تحویل می‌دهد.** به نظر من برای کسی که دنبال برنامه‌نویسی و سایت‌سازی از صفر نیست، کوارتز بهترین گزینه است. برای آشنایی بیشتر، قبل از شروع، این چند سایت را ببینید که با کوارتز ساخته شده‌اند:

- **بلاگ کریستالین (همین سایت)**
- [سایت کوارتز](https://quartz.jzhao.xyz/)
- [سایت کوانتوم گاردن](https://quantumgardener.blog/)
- [سایت توسعه‌دهندهٔ کوارتز](https://jzhao.xyz/)
- [سایت سوکراتیکا](https://toolbox.socratica.info/)
- و... (اگر شما هم سایتی با کوارتز ساختین، برای قرار گرفتنش در اینجا به من پیام بدین. باقی سایت‌ها رو [اینجا](https://quartz.jzhao.xyz/showcase) ببینید.)
## کوارتز vs راه‌های مشابه

کوارتز تنها Static Site Generator موجود نیست. [Hugo](https://gohugo.io/)، [Jekyll](https://jekyllrb.com/)، [MkDocs](https://www.mkdocs.org/) و کلی سایت‌ساز رایگان دیگر هم در بازار موجودند. علاوه بر این‌ها، خود ابسیدین هم سرویسی به نام [Publish](https://obsidian.md/publish) دارد که یک سایت از Vault شما می‌سازد. اما به دلیل اینکه ماهی ۸-۱۰ دلار برای کاربر عادی ایرانی آب می‌خورد، چندان به صرفه نیست. پس به جای راه گرونِ ساده، مجبوریم سراغ راه رایگانی بریم که یکم سخت‌تره. البته نه خیلی. پیش‌بینی من از زمان راه‌اندازی کوارتز بین ۴۵ تا ۶۰ دقیقه است. بعد از راه‌اندازی هم هر بار خیلی راحت سایت خود به خود آپدیت می‌شود.

حالا چرا کوارتز؟ دلیل اصلی من برای پیشنهاد کوارتز این است که **سازنده‌اش آن را به تن ابسیدین دوخته**. یعنی خودش کاربر ابسیدین بوده و ابزاری برای انتشار آنلاین یادداشت‌هایش ساخته. باقی سرویس‌هایی که گفتم، توانایی تبدیل یادداشت به سایت را دارند؛ اما توجهی به ریزه‌کاری‌ها و جزئیات ابسیدین -مثل لینک‌های داخلی، استفاده از بک‌لینک یا برچسب، جستجوی حرفه‌ای و...- ندارند. تنظیم این ابزارها وقت و مهارت برنامه‌نویسی می‌خواهد که شاید هر کسی نداشته باشد. پس بهتر است سراغ ابزاری برویم که بیشترین هم‌خوانی را با ابسیدین دارد. (لیست ویژگی‌های کوارتز را از [اینجا](https://quartz.jzhao.xyz/features/) ببینید.)

# نصب کوارتز

نصب کوارتز دانش برنامه‌نویسی خاصی نمی‌خواهد. اگر تجربهٔ برنامه‌نویسی ندارید، با دنبال کردن مرحله به مرحلهٔ [ویدئوی کانال](#) جلو بیایید. اگر هم که مراحل و اصطلاحات را می‌فهمید که نیازی به ویدئو نیست.
## ۰. پیش‌نیازها

- نصب [Node.js](https://nodejs.org/en/download)برای نصب، اجرا و تست سایت.
- نصب [Git](https://git-scm.com/) برای دریافت کوارتز و به‌روزرسانی سایت.
- نصب [VSCode](https://code.visualstudio.com/). اختیاری. برای استفاده از ترمینال و اصلاح کد.
- اکانت [گیت‌هاب](https://github.com/) برای میزبانی از سایت (اگر محل میزبانی دیگری مدنظر دارید، [اینجا](https://quartz.jzhao.xyz/hosting) را ببینید)

## ۱. راه‌اندازی کوارتز

اول از همه، این دستور را در ترمینال اجرا کنید تا کد کوارتز در دستگاه شما کپی شود. هرجایی که این کد اجرا شود، یک پوشه با نام «کوارتز» به همراه کدش ایجاد می‌شود. 

```
git clone https://github.com/jackyzha0/quartz.git
```

پوشه را باز کنید

```
cd quartz
```

با دستور ```npm i``` نیازمندی‌های کوارتز را نصب کنید.

```
npm i
```

و در نهایت یک پروژهٔ کوارتز بسازید.

```
npx quartz create
```

بعد از اجرای دستور بالا، برنامه می‌خواهد که از بین چند مدل تنظیمات انتخاب کنید. اول از همه، از بین گزینه‌های زیر ```Empty Quartz``` را انتخاب کنید. چون دنگ و فنگ کمتری دارد.

```
Choose how to initialize the content ....

- Empty Quartz
- Copy an existing folder
- Symlink an existing folder
```

سؤال بعدی، دربارهٔ مدل لینک‌های ابسیدین است. اگر مطمئن نیستید، اولی را انتخاب کنید. در غیر این‌صورت به بخش ```Files and links``` تنظیمات ابسیدین مراجعه کنید و ببینید که جلوی ```New link format``` قبلاً چه تنظیماتی را انتخاب کرده‌اید.

```
Choose how Quartz should resolve links in your content

- Treat links as shortest path
- Treat links as absolute path
- Treat links as relative path
```

تبریک 🎆 با تعیین تکلیف این دو مورد، سایت شما حالا آماده است. حالا با اجرای دستور زیر، سایت شما ساخته می‌شود. اگر همه‌چیز درست پیش رفته باشد، با رفتن به آدرس ```http://localhost:8080``` در مرورگر باید سایت خودتان را ببینید.

```
npx quartz build --serve
```

![[Pasted image 20240511123920.png]]

> [!danger] متوقف کردن کوارتز
> تا وقتی که ترمینال باز است، کوارتز هم اجرا می‌شود. در این‌صورت کارهایی مثل تغییر اسم پوشه یا... ممکن نیست. برای توقف کوارتز در ترمینال از Ctrl + C استفاده کنید.

## ۲. اتصال کوارتز به گیت‌هاب

تا اینجای کار سایت ساخته شده. منتها آنلاین و روی اینترنت نیست. فقط در دستگاه شماست. حالا می‌خواهیم این سایت را جایی بگذاریم که بشود با هر دستگاه متصل به اینترنت آن را دید. برای اینکار اول کل فایل‌های سایت کوارتز خودمان را روی گیت‌هاب می‌گذاریم و بعد به گیت‌هاب می‌گوییم که یک سایت تحویل ما بدهد.

بعد از اینکه اکانت خودتان را در گیت‌هاب ساختید، با کلیک روی دکمهٔ + در سمت بالا راست صفحه و انتخاب ```New repository``` یک Repo جدید بسازید. برای اسم این Repo هر چه دوست داشتید -مثل blog یا site یا website یا…- انتخاب کنید. تیکِ ```Add a README file``` را -اگر هست- بردارید و بدون تغییر باقی تنظیمات، ```Create Repository``` را بزنید.

دوباره به ترمینال برگردید و این دستور را اجرا کنید.

```
git remote rm origin
```

و بعد این

```
git remote add origin https://github.com/USERNAME/REPONAME.git
```

حواستان باشد که در کد بالا، مقادیر USERNAME و REPONAME را با نام کاربردی و اسم انتخابی Repo خودتان جایگزین کنید.

در نهایت هم این دستور را اجرا کنید تا فایل‌های روی کامپیوتر شما با گیت‌هاب سینک شود. بعد از سینک شدن فایل‌ها، اگر مشکلی پیش نیامده باشد، کوارتز یک ```Done``` به نشانهٔ پایان کار به شما نشان می‌دهد.

```
npx quartz sync --no-pull
```

تا اینجای کار، کد کوارتز روی گیت‌هاب گرفته است. حالا باید به گیت‌هاب بگوییم که سایت آنلاین را برای ما بسازد.

## ۳. بالا آوردن سایت با گیت‌هاب

قرار است به گیت‌هاب بفهمانیم که سایت را چطور برای ما بسازد. برای این‌کار، به پوشهٔ زیر در فایل‌های کوارتز بروید و یک فایل با عنوان `deploy.yml` بسازید.

```
.github/workflows/
```


> [!tip] مخفی بودن پوشه
> پوشهٔ .github ممکن است در کامپیوتر شما مخفی باشد. در این صورت تنظیمات سیستم‌عامل را طوری تغییر دهید که پوشه‌های مخفی را نشان دهد.

داخل فایل `deploy.yml`، کد پایین را Paste و سپس آن را ذخیره کنید. (فایل را با VSCode یا Notepad باز کنید) نسخهٔ پایین، به‌روزترین نسخهٔ کد در اردیبهشت ۱۴۰۳ است. اگر مدت زیادی از این تاریخ گذشته، از [این لینک](https://quartz.jzhao.xyz/hosting#github-pages) آخرین نسخهٔ را کپی کنید.

```yml
name: Deploy Quartz site to GitHub Pages
 
on:
  push:
    branches:
      - v4
 
permissions:
  contents: read
  pages: write
  id-token: write
 
concurrency:
  group: "pages"
  cancel-in-progress: false
 
jobs:
  build:
    runs-on: ubuntu-22.04
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0 # Fetch all history for git info
      - uses: actions/setup-node@v3
        with:
          node-version: 18.14
      - name: Install Dependencies
        run: npm ci
      - name: Build Quartz
        run: npx quartz build
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v2
        with:
          path: public
 
  deploy:
    needs: build
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v2
```

به صفحهٔ Repo خودتان در سایت گیت‌هاب برگردید. داخل `Settings` بروید و از منوی سمت چپ `Pages` را انتخاب کنید. و برای `Source` گزینهٔ `GitHub Actions` را بزنید.

![[gh-tut.jpg]]

حالا با اجرای دستور زیر، یک دور دیگر محتویات کوارتز را با گیت‌هاب سینک می‌کنیم و گیت‌هاب سایت را برای ما می‌سازد.

```
npx quartz sync
```

بعد از چند دقیق که گیت‌هاب سایت را ساخت، با مراجعه به این آدرس سایت‌تان را ببینید:

```
https://USERNAME.github.io/REPONAME
```

فقط حواستان باشد که نام کاربری و اسم Repo  را به جای مقادیر مشخص شده در آدرس سایت بگذارید.

## ۴. گذاشتن محتوا روی کوارتز و فارسی‌سازی

همان‌طور که در [[از یادداشت به سایت با کوارتز#کوارتز چیه؟|اول متن]] گفتیم، کوارتز یادداشت‌های شما را به سایت تبدیل می‌کند. تا الان ما سیستمی ساخته‌ایم که پوشهٔ یادداشت‌ها را به عنوان ورودی می‌گیرد و یک سایت به ما تحویل می‌دهد. حالا وقت آن است که سراغ پوشهٔ یادداشت‌های خودمان برویم و آبادش کنیم.

پوشهٔ `Content` در فولدر کوارتز محل گذاشتن یادداشت‌هاست. هر یادداشتی که اینجا باشد، در سایت می‌آید. پیشنهاد من این است که داخل این پوشه با ابسیدین یک Vault جدید بسازید و یادداشت‌هایی را که می‌خواهید آنلاین باشند -به همراه تصاویرشان- به داخل آن بیاورید. این‌طوری مدیریت یادداشت‌ها و اعمال تغییرات روی آن ساده‌تر خواهد بود. فایل `index.md` داخل پوشهٔ `Content` هم صفحهٔ اول سایت شماست. اطلاعات اولیه و لینک دادن به سایر مطالب از طریق آن انجام می‌شود. اگر می‌خواهید عنوان نمایشی آن را عوض کنید، انتهای متن و زیر عنوان [[از یادداشت به سایت با کوارتز#اضافه کردن عنوان و برچسب به متن|اضافه کردن عنوان و برچسب به متن]] را ببینید.

بعد از اضافه کردن یادداشت‌ها، کافیست این دستور را بار دیگر در ترمینال اجرا کنید تا یادداشت‌ها با تأخیری کوتاه به سایت شما اضافه بشوند.

```
npx quartz sync
```

به همین سادگی! هر بار بعد از نوشتن، کافیست این دستور را اجرا کنید که سایت خود به خود آپدیت شود.

و اما فارسی‌سازی. من یک‌دور کار ترجمهٔ کوارتز را انجام داده‌ام؛ اما هنوز به طور رسمی به آن اضافه نشده. به خاطر همین پوشه‌ای با نام `i18n` را روی کانال می‌گذارم. کافیست این محتویات این پوشه را در پوشه‌ای به همین نام Paste & Replace کنید و بعد از آن مقدار `locale` را در فایل `quartz.config.ts` به `fa-IR` تغییر دهید.

سایر تنظیمات سایت -مثل عنوان، فونت، رنگ‌ها و...- هم در همین فایل `quartz.config.ts` و فایل `quartz.layout.ts` قابل تنظیم است. مثلاً برای تغییر فونت کافیست نام فونت را در فایل `quartz.config.ts` مثل پایین تغییر دهید. برای اینکه فونت شما روی همهٔ دستگاه‌ها قابل مشاهده باشد، توصیه می‌کنم از بین فونت‌های گوگل انتخاب کنید.

```ts
typography: {
        header: "Vazirmatn",
        body: "Vazirmatn",
        code: "IBM Plex Mono",
      },
```

علاوه بر این دو فایل، هر مدل کد CSS باقیمانده را هم داخل `quartz/styles/custom.scss` بگذارید تا روی سایت نمایش داده شود. من برای تنظیمات فارسی سایت، از این کد استفاده می‌کنم که احتمالاً به کار همه بیاید.

```css
@use "./base.scss";
  
// put your custom CSS here!

html {
    font-family: Vazirmatn, sans-serif !important;
}

  

.breadcrumb-element p {
    margin: 0 .5rem 0 0;
    padding: 0;
    line-height: normal;
}

  

button#explorer .fold {
    opacity: .8;
    margin-left: 0 !important;
    margin-right: 0.5rem !important;
    transition: transform .3s;
}

  

.content-meta[show-comma="true"] > span:not(:last-child) {
    margin-left: 8px !important;
    margin-right: 0px !important;
}

  

.tags {
    padding-left: 0px !important;
    padding-right: 0px !important;
}

  

.folder-icon {
    margin-right: 0px !important;
    margin-left: 5px !important;
}

  

#explorer-content ul {
    padding-right: .7rem !important;
    padding-left: 0px !important;
}

#toc-content .depth-1 {
    padding: 0px !important;
    padding-right: 1rem !important;
}

  

#toc-content .depth-2 {
    padding: 0px !important;
    padding-right: 2rem !important;
}

  

#toc-content .depth-3 {
    padding: 0px !important;
    padding-right: 3rem !important;
}
  

li:has(> .folder-outer:not(.open)) > .folder-container > svg {
    transform: rotate(90deg) !important;
}
```

---

# بیشتر بدانید

تا اینجای کار سایت شما باید به همراه یادداشت‌ها، خیلی شیک و مجلسی ساخته شده باشد. آن‌چه در این بخش درباره‌اش می‌نویسم، مستحبی است.

## اضافه کردن عنوان و برچسب به متن

برای برچسب زدن به یادداشت‌ها، از [Frontmatter](https://help.obsidian.md/Editing+and+formatting/Properties) استفاده می‌کنیم. برای جلوگیری از نوشتن کد تکراری پایین برای هر یادداشت، توصیه می‌کنم از پلاگین Templater استفاده کنید.

```yml
---
title: "از یادداشت به سایت با کوارتز"
draft: false
tags:
  - آموزش
---
```

## جابجایی Componentها

یکم داستان دارد. بعداً درباره‌اش می‌نویسم.